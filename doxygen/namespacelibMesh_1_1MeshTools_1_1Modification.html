<!-- HTML header for doxygen -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libMesh: libMesh::MeshTools::Modification Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="../styles.css" rel="stylesheet" type="text/css" />
<link href="doxygen_stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <nav id="fixedbar">
    <ul id="fixednav">
      <li><a href="../index.html">Home</a></li>
      <li><a href="../support.html">About Us</a></li>
      <li><a href="../publications.html">Publications</a></li>
      <li><a href="../developers.html">Developers</a></li>
      <li><a href="../installation.html">Installation</a></li>
      <li><a href="../examples.html">Examples</a></li>
      <li><a href="../doxygen/index.html">Documentation</a></li>
    </ul>
  </nav>
  <div id="w">
    <header id="logo"><a href="index.html"><span id="logobg">SomeWebsiteLogo</span></a></header>
    <nav id="navigation">
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="../support.html">About Us</a></li>
        <li><a href="../publications.html">Publications</a></li>
        <li><a href="../developers.html">Developers</a></li>
        <li><a href="../installation.html">Installation</a></li>
        <li><a href="../examples.html">Examples</a></li>
        <li><a href="../doxygen/index.html">Documentation</a></li>
      </ul>
    </nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- <\!--BEGIN TITLEAREA-\-> -->
<!-- <div id="titlearea"> -->
<!-- <table cellspacing="0" cellpadding="0"> -->
<!--  <tbody> -->
<!--  <tr style="height: 56px;"> -->
<!--   <\!--BEGIN PROJECT_LOGO-\-> -->
<!--   <td id="projectlogo"><img alt="Logo" src=""/></td> -->
<!--   <\!--END PROJECT_LOGO-\-> -->
<!--   <\!--BEGIN PROJECT_NAME-\-> -->
<!--   <td style="padding-left: 0.5em;"> -->
<!--    <div id="projectname">libMesh -->
<!--    <\!--BEGIN PROJECT_NUMBER-\->&#160;<span id="projectnumber"></span><\!--END PROJECT_NUMBER-\-> -->
<!--    </div> -->
<!--    <\!--BEGIN PROJECT_BRIEF-\-><div id="projectbrief"></div><\!--END PROJECT_BRIEF-\-> -->
<!--   </td> -->
<!--   <\!--END PROJECT_NAME-\-> -->
<!--   <\!--BEGIN !PROJECT_NAME-\-> -->
<!--    <\!--BEGIN PROJECT_BRIEF-\-> -->
<!--     <td style="padding-left: 0.5em;"> -->
<!--     <div id="projectbrief"></div> -->
<!--     </td> -->
<!--    <\!--END PROJECT_BRIEF-\-> -->
<!--   <\!--END !PROJECT_NAME-\-> -->
<!--   <\!--BEGIN DISABLE_INDEX-\-> -->
<!--    <\!--BEGIN SEARCHENGINE-\-> -->
<!--    <td></td> -->
<!--    <\!--END SEARCHENGINE-\-> -->
<!--   <\!--END DISABLE_INDEX-\-> -->
<!--  </tr> -->
<!--  </tbody> -->
<!-- </table> -->
<!-- </div> -->
<!-- <\!--END TITLEAREA-\-> -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelibMesh.html">libMesh</a></li><li class="navelem"><a class="el" href="namespacelibMesh_1_1MeshTools.html">MeshTools</a></li><li class="navelem"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html">Modification</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">libMesh::MeshTools::Modification Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab3c34bd675ddf6c6675daa7fcc96d7cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html#ab3c34bd675ddf6c6675daa7fcc96d7cf">distort</a> (<a class="el" href="classlibMesh_1_1MeshBase.html">MeshBase</a> &amp;<a class="el" href="mesh__refinement_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>, const <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> factor, const bool perturb_boundary=false)</td></tr>
<tr class="separator:ab3c34bd675ddf6c6675daa7fcc96d7cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bb33f8faabadb6dbad5d5cf6c0efd9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html#a9bb33f8faabadb6dbad5d5cf6c0efd9f">redistribute</a> (<a class="el" href="classlibMesh_1_1MeshBase.html">MeshBase</a> &amp;<a class="el" href="mesh__refinement_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>, const <a class="el" href="classlibMesh_1_1FunctionBase.html">FunctionBase</a>&lt; <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> &gt; &amp;mapfunc)</td></tr>
<tr class="separator:a9bb33f8faabadb6dbad5d5cf6c0efd9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add16d717dcc51dfd7d2bf671fe8e811b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html#add16d717dcc51dfd7d2bf671fe8e811b">translate</a> (<a class="el" href="classlibMesh_1_1MeshBase.html">MeshBase</a> &amp;<a class="el" href="mesh__refinement_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>, const <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> xt=0., const <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> yt=0., const <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> zt=0.)</td></tr>
<tr class="separator:add16d717dcc51dfd7d2bf671fe8e811b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1b9487f3155857fbc4c4201a748bc09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html#ad1b9487f3155857fbc4c4201a748bc09">rotate</a> (<a class="el" href="classlibMesh_1_1MeshBase.html">MeshBase</a> &amp;<a class="el" href="mesh__refinement_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>, const <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> phi, const <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> theta=0., const <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> psi=0.)</td></tr>
<tr class="separator:ad1b9487f3155857fbc4c4201a748bc09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48c03ebd8ce97c6c8aef8e2a05a94a16"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html#a48c03ebd8ce97c6c8aef8e2a05a94a16">scale</a> (<a class="el" href="classlibMesh_1_1MeshBase.html">MeshBase</a> &amp;<a class="el" href="mesh__refinement_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>, const <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> xs, const <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> ys=0., const <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> zs=0.)</td></tr>
<tr class="separator:a48c03ebd8ce97c6c8aef8e2a05a94a16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a249f04550c345984831d08e013155668"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html#a249f04550c345984831d08e013155668">all_tri</a> (<a class="el" href="classlibMesh_1_1MeshBase.html">MeshBase</a> &amp;<a class="el" href="mesh__refinement_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>)</td></tr>
<tr class="separator:a249f04550c345984831d08e013155668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e817d4980341bde2cc3fba486d0d8e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html#a2e817d4980341bde2cc3fba486d0d8e6">smooth</a> (<a class="el" href="classlibMesh_1_1MeshBase.html">MeshBase</a> &amp;, unsigned int, <a class="el" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a>)</td></tr>
<tr class="separator:a2e817d4980341bde2cc3fba486d0d8e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31ce3f7f69838b3326f9bcabae3f2cd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html#a31ce3f7f69838b3326f9bcabae3f2cd6">flatten</a> (<a class="el" href="classlibMesh_1_1MeshBase.html">MeshBase</a> &amp;<a class="el" href="mesh__refinement_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>)</td></tr>
<tr class="separator:a31ce3f7f69838b3326f9bcabae3f2cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a355d0c7c33b55d44e9e77946caadbef6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html#a355d0c7c33b55d44e9e77946caadbef6">change_boundary_id</a> (<a class="el" href="classlibMesh_1_1MeshBase.html">MeshBase</a> &amp;<a class="el" href="mesh__refinement_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>, const <a class="el" href="namespacelibMesh.html#a3f4d8a52b5ef6ff6156ca209e12b5564">boundary_id_type</a> old_id, const <a class="el" href="namespacelibMesh.html#a3f4d8a52b5ef6ff6156ca209e12b5564">boundary_id_type</a> new_id)</td></tr>
<tr class="separator:a355d0c7c33b55d44e9e77946caadbef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30caf6b7a7280e592b7c177ff85b97a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelibMesh_1_1MeshTools_1_1Modification.html#a30caf6b7a7280e592b7c177ff85b97a0">change_subdomain_id</a> (<a class="el" href="classlibMesh_1_1MeshBase.html">MeshBase</a> &amp;<a class="el" href="mesh__refinement_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>, const <a class="el" href="namespacelibMesh.html#a634d676f703fd1cf217d85d6794abcb3">subdomain_id_type</a> old_id, const <a class="el" href="namespacelibMesh.html#a634d676f703fd1cf217d85d6794abcb3">subdomain_id_type</a> new_id)</td></tr>
<tr class="separator:a30caf6b7a7280e592b7c177ff85b97a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Tools for <code><a class="el" href="classlibMesh_1_1Mesh.html">Mesh</a></code> modification.</p>
<dl class="section author"><dt>Author</dt><dd>Benjamin S. Kirk </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2004 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a249f04550c345984831d08e013155668"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::MeshTools::Modification::all_tri </td>
          <td>(</td>
          <td class="paramtype">MeshBase &amp;&#160;</td>
          <td class="paramname"><em>mesh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Converts the 2D quadrilateral elements of a <a class="el" href="classlibMesh_1_1Mesh.html">Mesh</a> into triangular elements. Note: Only works for 2D elements! 3D elements are ignored. Note: Probably won't do the right thing for meshes which have been refined previously. </p>

<p>Definition at line <a class="el" href="mesh__modification_8C_source.html#l00722">722</a> of file <a class="el" href="mesh__modification_8C_source.html">mesh_modification.C</a>.</p>

<p>References <a class="el" href="classlibMesh_1_1MeshBase.html#a5ab834283fa6bc335ad623d2b737ec5e">libMesh::MeshBase::add_elem()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a9361e2879e37831f80afb43b762d651f">libMesh::MeshBase::add_point()</a>, <a class="el" href="boundary__info_8C_source.html#l00697">libMesh::BoundaryInfo::add_side()</a>, <a class="el" href="boundary__info_8C_source.html#l00811">libMesh::BoundaryInfo::boundary_ids()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a5c7824047ed759b5a4891a6936b546cc">libMesh::MeshBase::delete_elem()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#ac266e1f5eb6ac9566ccbd7e6add6c239">libMesh::MeshBase::elements_begin()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#ae94f1bce0dc50c489c6bae9ba64d06e8">libMesh::MeshBase::elements_end()</a>, <a class="el" href="variant__filter__iterator_8h_source.html#l00324">end</a>, <a class="el" href="libmesh__common_8h_source.html#l00223">libMesh::err</a>, <a class="el" href="mesh__base_8h_source.html#l00113">libMesh::MeshBase::get_boundary_info()</a>, <a class="el" href="elem_8h_source.html#l01375">libMesh::Elem::get_node()</a>, <a class="el" href="dof__object_8h_source.html#l00618">libMesh::DofObject::id()</a>, <a class="el" href="boundary__info_8h_source.html#l00496">libMesh::BoundaryInfo::invalid_id</a>, <a class="el" href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libMesh::libmesh_assert()</a>, <a class="el" href="namespacelibMesh.html#ad3b630fc9d82a03a756cd376df033fea">libMesh::libmesh_assert_greater()</a>, <a class="el" href="boundary__info_8h_source.html#l00249">libMesh::BoundaryInfo::n_boundary_ids()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a190e556d3be87f5ccd8d4fc98d1779d3">libMesh::MeshBase::n_elem()</a>, <a class="el" href="classlibMesh_1_1Elem.html#ae376bfa6ac14723330e07a97992b56c9">libMesh::Elem::n_sides()</a>, <a class="el" href="elem_8h_source.html#l01424">libMesh::Elem::neighbor()</a>, <a class="el" href="elem_8h_source.html#l01351">libMesh::Elem::node()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#aba28f0e44e2762b79156563a96920a9c">libMesh::MeshBase::node()</a>, <a class="el" href="elem_8h_source.html#l01654">libMesh::Elem::parent()</a>, <a class="el" href="elem_8h_source.html#l01329">libMesh::Elem::point()</a>, <a class="el" href="mesh__base_8C_source.html#l00120">libMesh::MeshBase::prepare_for_use()</a>, <a class="el" href="dof__object_8h_source.html#l00680">libMesh::DofObject::processor_id()</a>, <a class="el" href="enum__elem__type_8h_source.html#l00037">libMesh::QUAD4</a>, <a class="el" href="enum__elem__type_8h_source.html#l00038">libMesh::QUAD8</a>, <a class="el" href="enum__elem__type_8h_source.html#l00039">libMesh::QUAD9</a>, <a class="el" href="remote__elem_8C_source.html#l00057">libMesh::remote_elem</a>, <a class="el" href="boundary__info_8h_source.html#l00647">libMesh::BoundaryInfo::remove()</a>, <a class="el" href="dof__object_8h_source.html#l00627">libMesh::DofObject::set_id()</a>, <a class="el" href="elem_8h_source.html#l01434">libMesh::Elem::set_neighbor()</a>, <a class="el" href="elem_8h_source.html#l01398">libMesh::Elem::set_node()</a>, <a class="el" href="elem_8h_source.html#l01408">libMesh::Elem::subdomain_id()</a>, <a class="el" href="enum__elem__type_8h_source.html#l00034">libMesh::TRI3</a>, <a class="el" href="enum__elem__type_8h_source.html#l00035">libMesh::TRI6</a>, and <a class="el" href="classlibMesh_1_1Elem.html#ad06f8ac22978144723179eed42d10bae">libMesh::Elem::type()</a>.</p>
<div class="fragment"><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// The number of elements in the original mesh before any additions</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// or deletions.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> n_orig_elem = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_elem();</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// We store pointers to the newly created elements in a vector</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// until they are ready to be added to the mesh.  This is because</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// adding new elements on the fly can cause reallocation and invalidation</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// of existing iterators.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  std::vector&lt;Elem*&gt; new_elements;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  new_elements.reserve (2*n_orig_elem);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// If the original mesh has boundary data, we carry that over</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// to the new mesh with triangular elements.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> mesh_has_boundary_data = (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().n_boundary_ids() &gt; 0);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="comment">// Temporary vectors to store the new boundary element pointers, side numbers, and boundary ids</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  std::vector&lt;Elem*&gt; new_bndry_elements;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  std::vector&lt;unsigned short int&gt; new_bndry_sides;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  std::vector&lt;boundary_id_type&gt; new_bndry_ids;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">// Iterate over the elements, splitting QUADS into</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// pairs of conforming triangles.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// FIXME: This algorithm does not work on refined grids!</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    MeshBase::element_iterator       el  = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.elements_begin();</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keyword">const</span> MeshBase::element_iterator <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a> = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.elements_end();</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">for</span> (; el!=<a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a>; ++el)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        Elem* elem = *el;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2">ElemType</a> etype = elem-&gt;type();</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="comment">// all_tri currently only works on coarse meshes</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <a class="code" href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libmesh_assert</a> (!elem-&gt;parent());</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="comment">// We split the quads using the shorter of the two diagonals</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="comment">// to maintain the best angle properties.</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="keywordtype">bool</span> edge_swap = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="comment">// True if we actually split the current element.</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordtype">bool</span> split_elem = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="comment">// The two new triangular elements we will split the quad into.</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        Elem* tri0 = NULL;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        Elem* tri1 = NULL;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">switch</span> (etype)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;          {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2af4b68709f9e0a488822d3399de3508b1">QUAD4</a>:</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;              split_elem = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;              tri0 = <span class="keyword">new</span> Tri3;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;              tri1 = <span class="keyword">new</span> Tri3;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;              <span class="comment">// Check for possible edge swap</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;              <span class="keywordflow">if</span> ((elem-&gt;point(0) - elem-&gt;point(2)).size() &lt;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                  (elem-&gt;point(1) - elem-&gt;point(3)).size())</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                  tri0-&gt;set_node(0) = elem-&gt;get_node(0);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                  tri0-&gt;set_node(1) = elem-&gt;get_node(1);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                  tri0-&gt;set_node(2) = elem-&gt;get_node(2);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                  tri1-&gt;set_node(0) = elem-&gt;get_node(0);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                  tri1-&gt;set_node(1) = elem-&gt;get_node(2);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                  tri1-&gt;set_node(2) = elem-&gt;get_node(3);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                  edge_swap=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                  tri0-&gt;set_node(0) = elem-&gt;get_node(0);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                  tri0-&gt;set_node(1) = elem-&gt;get_node(1);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                  tri0-&gt;set_node(2) = elem-&gt;get_node(3);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                  tri1-&gt;set_node(0) = elem-&gt;get_node(1);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                  tri1-&gt;set_node(1) = elem-&gt;get_node(2);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                  tri1-&gt;set_node(2) = elem-&gt;get_node(3);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2a850fa5218d8f69ab09f5bccaf40b615a">QUAD8</a>:</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;              split_elem =  <span class="keyword">true</span>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;              tri0 = <span class="keyword">new</span> Tri6;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;              tri1 = <span class="keyword">new</span> Tri6;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;              Node* new_node = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.add_point( (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.node(elem-&gt;node(0)) +</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                                                <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.node(elem-&gt;node(1)) +</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                                                <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.node(elem-&gt;node(2)) +</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                                                <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.node(elem-&gt;node(3)) / 4)</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                                               );</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;              <span class="comment">// Check for possible edge swap</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;              <span class="keywordflow">if</span> ((elem-&gt;point(0) - elem-&gt;point(2)).size() &lt;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                  (elem-&gt;point(1) - elem-&gt;point(3)).size())</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                  tri0-&gt;set_node(0) = elem-&gt;get_node(0);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                  tri0-&gt;set_node(1) = elem-&gt;get_node(1);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                  tri0-&gt;set_node(2) = elem-&gt;get_node(2);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                  tri0-&gt;set_node(3) = elem-&gt;get_node(4);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                  tri0-&gt;set_node(4) = elem-&gt;get_node(5);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                  tri0-&gt;set_node(5) = new_node;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                  tri1-&gt;set_node(0) = elem-&gt;get_node(0);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                  tri1-&gt;set_node(1) = elem-&gt;get_node(2);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                  tri1-&gt;set_node(2) = elem-&gt;get_node(3);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                  tri1-&gt;set_node(3) = new_node;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                  tri1-&gt;set_node(4) = elem-&gt;get_node(6);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                  tri1-&gt;set_node(5) = elem-&gt;get_node(7);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                  edge_swap=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                  tri0-&gt;set_node(0) = elem-&gt;get_node(3);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                  tri0-&gt;set_node(1) = elem-&gt;get_node(0);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                  tri0-&gt;set_node(2) = elem-&gt;get_node(1);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                  tri0-&gt;set_node(3) = elem-&gt;get_node(7);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                  tri0-&gt;set_node(4) = elem-&gt;get_node(4);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                  tri0-&gt;set_node(5) = new_node;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                  tri1-&gt;set_node(0) = elem-&gt;get_node(1);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                  tri1-&gt;set_node(1) = elem-&gt;get_node(2);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                  tri1-&gt;set_node(2) = elem-&gt;get_node(3);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                  tri1-&gt;set_node(3) = elem-&gt;get_node(5);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                  tri1-&gt;set_node(4) = elem-&gt;get_node(6);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                  tri1-&gt;set_node(5) = new_node;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2a2d7bef790b667ca2769e52ce6de8b9fd">QUAD9</a>:</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;              split_elem =  <span class="keyword">true</span>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;              tri0 = <span class="keyword">new</span> Tri6;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;              tri1 = <span class="keyword">new</span> Tri6;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;              <span class="comment">// Check for possible edge swap</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;              <span class="keywordflow">if</span> ((elem-&gt;point(0) - elem-&gt;point(2)).size() &lt;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                  (elem-&gt;point(1) - elem-&gt;point(3)).size())</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                  tri0-&gt;set_node(0) = elem-&gt;get_node(0);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                  tri0-&gt;set_node(1) = elem-&gt;get_node(1);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                  tri0-&gt;set_node(2) = elem-&gt;get_node(2);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                  tri0-&gt;set_node(3) = elem-&gt;get_node(4);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                  tri0-&gt;set_node(4) = elem-&gt;get_node(5);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                  tri0-&gt;set_node(5) = elem-&gt;get_node(8);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                  tri1-&gt;set_node(0) = elem-&gt;get_node(0);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                  tri1-&gt;set_node(1) = elem-&gt;get_node(2);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                  tri1-&gt;set_node(2) = elem-&gt;get_node(3);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                  tri1-&gt;set_node(3) = elem-&gt;get_node(8);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                  tri1-&gt;set_node(4) = elem-&gt;get_node(6);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                  tri1-&gt;set_node(5) = elem-&gt;get_node(7);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                  edge_swap=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                  tri0-&gt;set_node(0) = elem-&gt;get_node(0);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                  tri0-&gt;set_node(1) = elem-&gt;get_node(1);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                  tri0-&gt;set_node(2) = elem-&gt;get_node(3);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                  tri0-&gt;set_node(3) = elem-&gt;get_node(4);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                  tri0-&gt;set_node(4) = elem-&gt;get_node(8);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                  tri0-&gt;set_node(5) = elem-&gt;get_node(7);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                  tri1-&gt;set_node(0) = elem-&gt;get_node(1);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                  tri1-&gt;set_node(1) = elem-&gt;get_node(2);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                  tri1-&gt;set_node(2) = elem-&gt;get_node(3);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                  tri1-&gt;set_node(3) = elem-&gt;get_node(5);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                  tri1-&gt;set_node(4) = elem-&gt;get_node(6);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                  tri1-&gt;set_node(5) = elem-&gt;get_node(8);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            <span class="comment">// No need to split elements that are already triangles</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2acccb9e40eddc1b28768f2128fe1a8f08">TRI3</a>:</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2aad2d0656d7cf0f061899c655560c1e55">TRI6</a>:</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            <span class="comment">// Try to ignore non-2D elements for now</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;              <a class="code" href="namespacelibMesh.html#a74e5bc8a72d210b3d87b0221b1f69db1">libMesh::err</a> &lt;&lt; <span class="stringliteral">&quot;Warning, encountered non-2D element &quot;</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                           &lt;&lt; Utility::enum_to_string&lt;ElemType&gt;(etype)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                           &lt;&lt; <span class="stringliteral">&quot; in MeshTools::Modification::all_tri(), hope that&#39;s OK...&quot;</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                           &lt;&lt; std::endl;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;          } <span class="comment">// end switch (etype)</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">if</span> (split_elem)</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;          {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <span class="comment">// Be sure the correct ID&#39;s are also set for tri0 and</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <span class="comment">// tri1.</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            tri0-&gt;processor_id() = elem-&gt;processor_id();</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            tri0-&gt;subdomain_id() = elem-&gt;subdomain_id();</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            tri1-&gt;processor_id() = elem-&gt;processor_id();</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            tri1-&gt;subdomain_id() = elem-&gt;subdomain_id();</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <span class="keywordflow">if</span> (mesh_has_boundary_data)</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;              {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> sn=0; sn&lt;elem-&gt;n_sides(); ++sn)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                  {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                    <span class="keyword">const</span> std::vector&lt;boundary_id_type&gt;&amp; bc_ids =</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                      <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().boundary_ids(*el, sn);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                    <span class="keywordflow">for</span> (std::vector&lt;boundary_id_type&gt;::const_iterator id_it=bc_ids.begin(); id_it!=bc_ids.end(); ++id_it)</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                      {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                        <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#a3f4d8a52b5ef6ff6156ca209e12b5564">boundary_id_type</a> b_id = *id_it;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                        <span class="keywordflow">if</span> (b_id != BoundaryInfo::invalid_id)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                          {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                            <span class="comment">// Add the boundary ID to the list of new boundary ids</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                            new_bndry_ids.push_back(b_id);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                            <span class="comment">// Convert the boundary side information of the old element to</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                            <span class="comment">// boundary side information for the new element.</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                            <span class="keywordflow">if</span> (!edge_swap)</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                              {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                                <span class="keywordflow">switch</span> (sn)</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                                  {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                                  <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                                    {</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                      <span class="comment">// New boundary side is Tri 0, side 0</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                      new_bndry_elements.push_back(tri0);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                                      new_bndry_sides.push_back(0);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                                    }</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                                  <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                                    {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                                      <span class="comment">// New boundary side is Tri 0, side 1</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                                      new_bndry_elements.push_back(tri0);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                                      new_bndry_sides.push_back(1);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                                    }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                                  <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                                    {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                                      <span class="comment">// New boundary side is Tri 1, side 1</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                                      new_bndry_elements.push_back(tri1);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                                      new_bndry_sides.push_back(1);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                                    }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                                  <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                    {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                      <span class="comment">// New boundary side is Tri 1, side 2</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                                      new_bndry_elements.push_back(tri1);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                                      new_bndry_sides.push_back(2);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                                    }</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                                  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                                    libmesh_error_msg(<span class="stringliteral">&quot;Quad4/8/9 cannot have more than 4 sides.&quot;</span>);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                                  }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                              }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                            <span class="keywordflow">else</span> <span class="comment">// edge_swap==true</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                              {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                                <span class="keywordflow">switch</span> (sn)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                                  {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                                  <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                                    {</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                                      <span class="comment">// New boundary side is Tri 0, side 0</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                                      new_bndry_elements.push_back(tri0);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                                      new_bndry_sides.push_back(0);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                                    }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                                  <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                                    {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                                      <span class="comment">// New boundary side is Tri 1, side 0</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                                      new_bndry_elements.push_back(tri1);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                                      new_bndry_sides.push_back(0);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                                    }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                                  <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                                    {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                                      <span class="comment">// New boundary side is Tri 1, side 1</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                                      new_bndry_elements.push_back(tri1);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                                      new_bndry_sides.push_back(1);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                                    }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                                  <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                                    {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                                      <span class="comment">// New boundary side is Tri 0, side 2</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                                      new_bndry_elements.push_back(tri0);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                                      new_bndry_sides.push_back(2);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                                    }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                                  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                                    libmesh_error_msg(<span class="stringliteral">&quot;Quad4/8/9 cannot have more than 4 sides.&quot;</span>);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                                  }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                              } <span class="comment">// end edge_swap==true</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                          } <span class="comment">// end if (b_id != BoundaryInfo::invalid_id)</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                      } <span class="comment">// end for loop over boundary IDs</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                  } <span class="comment">// end for loop over sides</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                <span class="comment">// Remove the original element from the BoundaryInfo structure.</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().remove(elem);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;              } <span class="comment">// end if (mesh_has_boundary_data)</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="comment">// On a distributed mesh, we need to preserve remote_elem</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            <span class="comment">// links, since prepare_for_use can&#39;t reconstruct them for</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <span class="comment">// us.</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sn=0; sn&lt;elem-&gt;n_sides(); ++sn)</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;              {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                <span class="keywordflow">if</span> (elem-&gt;neighbor(sn) == <a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>)</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                  {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                    <span class="comment">// Create a remote_elem link on one of the new</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    <span class="comment">// elements corresponding to the link from the old</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                    <span class="comment">// element.</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    <span class="keywordflow">if</span> (!edge_swap)</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                      {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                        <span class="keywordflow">switch</span> (sn)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                          {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                          <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                            {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                              <span class="comment">// New remote side is Tri 0, side 0</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                              tri0-&gt;set_neighbor(0, const_cast&lt;RemoteElem*&gt;(<a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>));</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                            }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                          <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                            {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                              <span class="comment">// New remote side is Tri 0, side 1</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                              tri0-&gt;set_neighbor(1, const_cast&lt;RemoteElem*&gt;(<a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>));</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                            }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                          <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                            {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                              <span class="comment">// New remote side is Tri 1, side 1</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                              tri1-&gt;set_neighbor(1, const_cast&lt;RemoteElem*&gt;(<a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>));</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                            }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                          <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                            {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                              <span class="comment">// New remote side is Tri 1, side 2</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                              tri1-&gt;set_neighbor(2, const_cast&lt;RemoteElem*&gt;(<a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>));</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                            }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                            libmesh_error_msg(<span class="stringliteral">&quot;Quad4/8/9 cannot have more than 4 sides.&quot;</span>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                          }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                      }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                    <span class="keywordflow">else</span> <span class="comment">// edge_swap==true</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                      {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                        <span class="keywordflow">switch</span> (sn)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                          {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                          <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                            {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                              <span class="comment">// New remote side is Tri 0, side 0</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                              tri0-&gt;set_neighbor(0, const_cast&lt;RemoteElem*&gt;(<a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>));</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                            }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                          <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                            {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                              <span class="comment">// New remote side is Tri 1, side 0</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                              tri1-&gt;set_neighbor(0, const_cast&lt;RemoteElem*&gt;(<a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>));</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                            }</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                          <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                            {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                              <span class="comment">// New remote side is Tri 1, side 1</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                              tri1-&gt;set_neighbor(1, const_cast&lt;RemoteElem*&gt;(<a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>));</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                            }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                          <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                            {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                              <span class="comment">// New remote side is Tri 0, side 2</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                              tri0-&gt;set_neighbor(2, const_cast&lt;RemoteElem*&gt;(<a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>));</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                            }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                            libmesh_error_msg(<span class="stringliteral">&quot;Quad4/8/9 cannot have more than 4 sides.&quot;</span>);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                          }</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                      } <span class="comment">// end edge_swap==true</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                  } <span class="comment">// end if (elem-&gt;neighbor(sn) == remote_elem)</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;              } <span class="comment">// end for loop over sides</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            <span class="comment">// Determine new IDs for the split elements which will be</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            <span class="comment">// the same on all processors, therefore keeping the Mesh</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <span class="comment">// in sync.  Note: we offset the new IDs by n_orig_elem to</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            <span class="comment">// avoid overwriting any of the original IDs, this assumes</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            <span class="comment">// they were contiguously-numbered to begin with...</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            tri0-&gt;set_id( n_orig_elem + 2*elem-&gt;id() + 0 );</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            tri1-&gt;set_id( n_orig_elem + 2*elem-&gt;id() + 1 );</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            <span class="comment">// Add the newly-created triangles to the temporary vector of new elements.</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            new_elements.push_back(tri0);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            new_elements.push_back(tri1);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            <span class="comment">// Delete the original element</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.delete_elem(elem);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;          } <span class="comment">// end if (split_elem)</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      } <span class="comment">// End for loop over elements</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  } <span class="comment">// end scope</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="comment">// Now, iterate over the new elements vector, and add them each to</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="comment">// the Mesh.</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    std::vector&lt;Elem*&gt;::iterator el        = new_elements.begin();</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keyword">const</span> std::vector&lt;Elem*&gt;::iterator end = new_elements.end();</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">for</span> (; el != <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a>; ++el)</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.add_elem(*el);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">if</span> (mesh_has_boundary_data)</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="comment">// By this time, we should have removed all of the original boundary sides</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <span class="comment">// - except on a hybrid mesh, where we can&#39;t &quot;start from a blank slate&quot;! - RHS</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <span class="comment">// libmesh_assert_equal_to (mesh.get_boundary_info().n_boundary_conds(), 0);</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <span class="comment">// Clear the boundary info, to be sure and start from a blank slate.</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="comment">// mesh.get_boundary_info().clear();</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="comment">// If the old mesh had boundary data, the new mesh better have some.</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <a class="code" href="namespacelibMesh.html#ad3b630fc9d82a03a756cd376df033fea">libmesh_assert_greater</a> (new_bndry_elements.size(), 0);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      <span class="comment">// We should also be sure that the lengths of the new boundary data vectors</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="comment">// are all the same.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      libmesh_assert_equal_to (new_bndry_elements.size(), new_bndry_sides.size());</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      libmesh_assert_equal_to (new_bndry_sides.size(), new_bndry_ids.size());</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      <span class="comment">// Add the new boundary info to the mesh</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> s=0; s&lt;new_bndry_elements.size(); ++s)</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().add_side(new_bndry_elements[s],</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                                          new_bndry_sides[s],</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                                          new_bndry_ids[s]);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">// Prepare the newly created mesh for use.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.prepare_for_use(<span class="comment">/*skip_renumber =*/</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="comment">// Let the new_elements and new_bndry_elements vectors go out of scope.</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;}</div>
<div class="ttc" id="namespacelibMesh_html_a16d066cfcd1a19aa971a530807e0deb2aad2d0656d7cf0f061899c655560c1e55"><div class="ttname"><a href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2aad2d0656d7cf0f061899c655560c1e55">libMesh::TRI6</a></div><div class="ttdef"><b>Definition:</b> <a href="enum__elem__type_8h_source.html#l00035">enum_elem_type.h:35</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ac03a5d846eeb24a13168f6b5358f86e3"><div class="ttname"><a href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libMesh::libmesh_assert</a></div><div class="ttdeci">libmesh_assert(remote_elem)</div></div>
<div class="ttc" id="namespacelibMesh_html_a16d066cfcd1a19aa971a530807e0deb2"><div class="ttname"><a href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2">libMesh::ElemType</a></div><div class="ttdeci">ElemType</div><div class="ttdef"><b>Definition:</b> <a href="enum__elem__type_8h_source.html#l00030">enum_elem_type.h:30</a></div></div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l00824">mesh_communication.C:824</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a16d066cfcd1a19aa971a530807e0deb2af4b68709f9e0a488822d3399de3508b1"><div class="ttname"><a href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2af4b68709f9e0a488822d3399de3508b1">libMesh::QUAD4</a></div><div class="ttdef"><b>Definition:</b> <a href="enum__elem__type_8h_source.html#l00037">enum_elem_type.h:37</a></div></div>
<div class="ttc" id="variant__filter__iterator_8h_html_a785f0bd261d7bd1918b031c5133da2b9"><div class="ttname"><a href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a></div><div class="ttdeci">IterBase * end</div><div class="ttdef"><b>Definition:</b> <a href="variant__filter__iterator_8h_source.html#l00324">variant_filter_iterator.h:324</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a16d066cfcd1a19aa971a530807e0deb2acccb9e40eddc1b28768f2128fe1a8f08"><div class="ttname"><a href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2acccb9e40eddc1b28768f2128fe1a8f08">libMesh::TRI3</a></div><div class="ttdef"><b>Definition:</b> <a href="enum__elem__type_8h_source.html#l00034">enum_elem_type.h:34</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a3f4d8a52b5ef6ff6156ca209e12b5564"><div class="ttname"><a href="namespacelibMesh.html#a3f4d8a52b5ef6ff6156ca209e12b5564">libMesh::boundary_id_type</a></div><div class="ttdeci">int8_t boundary_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00051">id_types.h:51</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a74e5bc8a72d210b3d87b0221b1f69db1"><div class="ttname"><a href="namespacelibMesh.html#a74e5bc8a72d210b3d87b0221b1f69db1">libMesh::err</a></div><div class="ttdeci">OStreamProxy err(std::cerr)</div><div class="ttdef"><b>Definition:</b> <a href="libmesh__common_8h_source.html#l00223">libmesh_common.h:223</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ad3b630fc9d82a03a756cd376df033fea"><div class="ttname"><a href="namespacelibMesh.html#ad3b630fc9d82a03a756cd376df033fea">libMesh::libmesh_assert_greater</a></div><div class="ttdeci">libmesh_assert_greater(libMeshPrivateData::_n_processors, 0)</div></div>
<div class="ttc" id="namespacelibMesh_html_a16d066cfcd1a19aa971a530807e0deb2a850fa5218d8f69ab09f5bccaf40b615a"><div class="ttname"><a href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2a850fa5218d8f69ab09f5bccaf40b615a">libMesh::QUAD8</a></div><div class="ttdef"><b>Definition:</b> <a href="enum__elem__type_8h_source.html#l00038">enum_elem_type.h:38</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a16d066cfcd1a19aa971a530807e0deb2a2d7bef790b667ca2769e52ce6de8b9fd"><div class="ttname"><a href="namespacelibMesh.html#a16d066cfcd1a19aa971a530807e0deb2a2d7bef790b667ca2769e52ce6de8b9fd">libMesh::QUAD9</a></div><div class="ttdef"><b>Definition:</b> <a href="enum__elem__type_8h_source.html#l00039">enum_elem_type.h:39</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ab4541d74809228310a715b11c40587fc"><div class="ttname"><a href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">libMesh::dof_id_type</a></div><div class="ttdeci">uint8_t dof_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00064">id_types.h:64</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a903992f631b52b5ba05ad96a51e7b383"><div class="ttname"><a href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">libMesh::remote_elem</a></div><div class="ttdeci">const RemoteElem * remote_elem</div><div class="ttdef"><b>Definition:</b> <a href="remote__elem_8C_source.html#l00057">remote_elem.C:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a355d0c7c33b55d44e9e77946caadbef6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::MeshTools::Modification::change_boundary_id </td>
          <td>(</td>
          <td class="paramtype">MeshBase &amp;&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boundary_id_type&#160;</td>
          <td class="paramname"><em>old_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boundary_id_type&#160;</td>
          <td class="paramname"><em>new_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds any boundary ids that are currently old_id, changes them to new_id </p>

<p>Definition at line <a class="el" href="mesh__modification_8C_source.html#l01495">1495</a> of file <a class="el" href="mesh__modification_8C_source.html">mesh_modification.C</a>.</p>

<p>References <a class="el" href="boundary__info_8C_source.html#l00602">libMesh::BoundaryInfo::add_edge()</a>, <a class="el" href="boundary__info_8C_source.html#l00530">libMesh::BoundaryInfo::add_node()</a>, <a class="el" href="boundary__info_8C_source.html#l00697">libMesh::BoundaryInfo::add_side()</a>, <a class="el" href="boundary__info_8C_source.html#l00811">libMesh::BoundaryInfo::boundary_ids()</a>, <a class="el" href="boundary__info_8C_source.html#l00841">libMesh::BoundaryInfo::edge_boundary_ids()</a>, <a class="el" href="mesh__base_8h_source.html#l00113">libMesh::MeshBase::get_boundary_info()</a>, <a class="el" href="elem_8h_source.html#l01375">libMesh::Elem::get_node()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a32031f5d29428cf17dad4cabaf60d298">libMesh::MeshBase::level_elements_begin()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#ae94f3f5a30c83cdd0187ba02a5b8b17e">libMesh::MeshBase::level_elements_end()</a>, <a class="el" href="classlibMesh_1_1Elem.html#adde1fccc9a1fc4b43485629cb6c4062b">libMesh::Elem::n_edges()</a>, <a class="el" href="tecplot__io_8C_source.html#l00067">n_nodes</a>, <a class="el" href="classlibMesh_1_1Elem.html#a3a1e00b1906b0f6cf0cc1760c9a7da1f">libMesh::Elem::n_nodes()</a>, <a class="el" href="classlibMesh_1_1Elem.html#ae376bfa6ac14723330e07a97992b56c9">libMesh::Elem::n_sides()</a>, <a class="el" href="boundary__info_8h_source.html#l00647">libMesh::BoundaryInfo::remove()</a>, <a class="el" href="boundary__info_8C_source.html#l01231">libMesh::BoundaryInfo::remove_edge()</a>, and <a class="el" href="boundary__info_8C_source.html#l01295">libMesh::BoundaryInfo::remove_side()</a>.</p>
<div class="fragment"><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;{</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <span class="comment">// Only level-0 elements store BCs.  Loop over them.</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  MeshBase::element_iterator           el = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.level_elements_begin(0);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="keyword">const</span> MeshBase::element_iterator end_el = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.level_elements_end(0);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <span class="keywordflow">for</span> (; el != end_el; ++el)</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      Elem *elem = *el;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="tecplot__io_8C.html#ae4aba5fa8c8579c6576b4f087aefb091">n_nodes</a> = elem-&gt;n_nodes();</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n=0; n != <a class="code" href="tecplot__io_8C.html#ae4aba5fa8c8579c6576b4f087aefb091">n_nodes</a>; ++n)</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;          <span class="keyword">const</span> std::vector&lt;boundary_id_type&gt;&amp; old_ids =</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().boundary_ids(elem-&gt;get_node(n));</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;          <span class="keywordflow">if</span> (std::find(old_ids.begin(), old_ids.end(), old_id) != old_ids.end())</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;            {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;              std::vector&lt;boundary_id_type&gt; new_ids(old_ids);</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;              std::replace(new_ids.begin(), new_ids.end(), old_id, new_id);</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;              <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().remove(elem-&gt;get_node(n));</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;              <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().add_node(elem-&gt;get_node(n), new_ids);</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;            }</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        }</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_edges = elem-&gt;n_edges();</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> edge=0; edge != n_edges; ++edge)</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        {</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;          <span class="keyword">const</span> std::vector&lt;boundary_id_type&gt;&amp; old_ids =</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;            <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().edge_boundary_ids(elem, edge);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;          <span class="keywordflow">if</span> (std::find(old_ids.begin(), old_ids.end(), old_id) != old_ids.end())</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;            {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;              std::vector&lt;boundary_id_type&gt; new_ids(old_ids);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;              std::replace(new_ids.begin(), new_ids.end(), old_id, new_id);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;              <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().remove_edge(elem, edge);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;              <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().add_edge(elem, edge, new_ids);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;            }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        }</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_sides = elem-&gt;n_sides();</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> s=0; s != n_sides; ++s)</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;          <span class="keyword">const</span> std::vector&lt;boundary_id_type&gt;&amp; old_ids =</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().boundary_ids(elem, s);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;          <span class="keywordflow">if</span> (std::find(old_ids.begin(), old_ids.end(), old_id) != old_ids.end())</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;              std::vector&lt;boundary_id_type&gt; new_ids(old_ids);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;              std::replace(new_ids.begin(), new_ids.end(), old_id, new_id);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;              <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().remove_side(elem, s);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;              <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().add_side(elem, s, new_ids);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        }</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    }</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;}</div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l00824">mesh_communication.C:824</a></div></div>
<div class="ttc" id="tecplot__io_8C_html_ae4aba5fa8c8579c6576b4f087aefb091"><div class="ttname"><a href="tecplot__io_8C.html#ae4aba5fa8c8579c6576b4f087aefb091">n_nodes</a></div><div class="ttdeci">const dof_id_type n_nodes</div><div class="ttdef"><b>Definition:</b> <a href="tecplot__io_8C_source.html#l00067">tecplot_io.C:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a30caf6b7a7280e592b7c177ff85b97a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::MeshTools::Modification::change_subdomain_id </td>
          <td>(</td>
          <td class="paramtype">MeshBase &amp;&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const subdomain_id_type&#160;</td>
          <td class="paramname"><em>old_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const subdomain_id_type&#160;</td>
          <td class="paramname"><em>new_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds any subdomain ids that are currently old_id, changes them to new_id </p>

<p>Definition at line <a class="el" href="mesh__modification_8C_source.html#l01552">1552</a> of file <a class="el" href="mesh__modification_8C_source.html">mesh_modification.C</a>.</p>

<p>References <a class="el" href="classlibMesh_1_1MeshBase.html#ac266e1f5eb6ac9566ccbd7e6add6c239">libMesh::MeshBase::elements_begin()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#ae94f1bce0dc50c489c6bae9ba64d06e8">libMesh::MeshBase::elements_end()</a>, and <a class="el" href="elem_8h_source.html#l01408">libMesh::Elem::subdomain_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;{</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  MeshBase::element_iterator           el = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.elements_begin();</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="keyword">const</span> MeshBase::element_iterator end_el = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.elements_end();</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="keywordflow">for</span> (; el != end_el; ++el)</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      Elem *elem = *el;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <span class="keywordflow">if</span> (elem-&gt;subdomain_id() == old_id)</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        elem-&gt;subdomain_id() = new_id;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    }</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;}</div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l00824">mesh_communication.C:824</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3c34bd675ddf6c6675daa7fcc96d7cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::MeshTools::Modification::distort </td>
          <td>(</td>
          <td class="paramtype">MeshBase &amp;&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>perturb_boundary</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Randomly perturb the nodal locations. This function will move each node <code>factor</code> fraction of its minimum neighboring node separation distance. Nodes on the boundary are not moved by default, however they may be by setting the flag <code>perturb_boundary</code> true. </p>

<p>Definition at line <a class="el" href="mesh__modification_8C_source.html#l00048">48</a> of file <a class="el" href="mesh__modification_8C_source.html">mesh_modification.C</a>.</p>

<p>References <a class="el" href="classlibMesh_1_1MeshBase.html#aefa4ded9eaf654a45ab593a0963ecbf3">libMesh::MeshBase::active_elements_begin()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#ae3f09f1b7556aef88919249861728e23">libMesh::MeshBase::active_elements_end()</a>, <a class="el" href="variant__filter__iterator_8h_source.html#l00324">end</a>, <a class="el" href="mesh__tools_8C_source.html#l00389">libMesh::MeshTools::find_boundary_nodes()</a>, <a class="el" href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libMesh::libmesh_assert()</a>, <a class="el" href="libmesh__augment__std__namespace_8h_source.html#l00027">std::max()</a>, <a class="el" href="mesh__base_8h_source.html#l00158">libMesh::MeshBase::mesh_dimension()</a>, <a class="el" href="libmesh__augment__std__namespace_8h_source.html#l00029">std::min()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a190e556d3be87f5ccd8d4fc98d1779d3">libMesh::MeshBase::n_elem()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a5b76b109bc6bd087c981774897aa6167">libMesh::MeshBase::n_nodes()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#abc2fd76e7bf6c200f5e8849dfca9cd03">libMesh::MeshBase::node_ptr()</a>, <a class="el" href="namespacelibMesh.html#a7548a5faa85e5027223ef5c57d792445">libMesh::START_LOG()</a>, <a class="el" href="namespacelibMesh.html#aefa921f501605f00f5881b914fca3eeb">libMesh::STOP_LOG()</a>, and <a class="el" href="type__vector_8C_source.html#l00037">libMesh::TypeVector&lt; T &gt;::unit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libmesh_assert</a> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_nodes());</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libmesh_assert</a> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_elem());</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libmesh_assert</a> ((factor &gt;= 0.) &amp;&amp; (factor &lt;= 1.));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="namespacelibMesh.html#a7548a5faa85e5027223ef5c57d792445">START_LOG</a>(<span class="stringliteral">&quot;distort()&quot;</span>, <span class="stringliteral">&quot;MeshTools::Modification&quot;</span>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// First find nodes on the boundary and flag them</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// so that we don&#39;t move them</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// on_boundary holds false (not on boundary) and true (on boundary)</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  std::vector&lt;bool&gt; on_boundary (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_nodes(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">if</span> (!perturb_boundary) <a class="code" href="namespacelibMesh_1_1MeshTools.html#a0fd39d630f54c93571ee6449e8b15550">MeshTools::find_boundary_nodes</a> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>, on_boundary);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// Now calculate the minimum distance to</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">// neighboring nodes for each node.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// hmin holds these distances.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  std::vector&lt;float&gt; hmin (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_nodes(),</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                           <a class="code" href="namespacestd.html#a6987c84b7beab8b2ebdee7e2549d698f">std::numeric_limits&lt;float&gt;::max</a>());</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  MeshBase::element_iterator       el  = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.active_elements_begin();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keyword">const</span> MeshBase::element_iterator <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a> = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.active_elements_end();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">for</span> (; el!=<a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a>; ++el)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n=0; n&lt;(*el)-&gt;n_nodes(); n++)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      hmin[(*el)-&gt;node(n)] = <a class="code" href="namespacestd.html#a4444b32c7044d9b34125eaebd070a0e3">std::min</a>(hmin[(*el)-&gt;node(n)],</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                      <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>((*el)-&gt;hmin()));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// Now actually move the nodes</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> seed = 123456;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// seed the random number generator.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// We&#39;ll loop from 1 to n_nodes on every processor, even those</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// that don&#39;t have a particular node, so that the pseudorandom</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// numbers will be the same everywhere.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    std::srand(seed);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// If the node is on the boundary or</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// the node is not used by any element (hmin[n]&lt;1.e20)</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// then we should not move it.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// [Note: Testing for (in)equality might be wrong</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// (different types, namely float and double)]</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n=0; n&lt;<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_nodes(); n++)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">if</span> (!on_boundary[n] &amp;&amp; (hmin[n] &lt; 1.e20) )</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;          <span class="comment">// the direction, random but unit normalized</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;          Point dir( static_cast&lt;Real&gt;(std::rand())/static_cast&lt;Real&gt;(RAND_MAX),</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                     (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.mesh_dimension() &gt; 1) ?</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                     static_cast&lt;Real&gt;(std::rand())/static_cast&lt;Real&gt;(RAND_MAX)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                     : 0.,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                     ((<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.mesh_dimension() == 3) ?</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                      static_cast&lt;<a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a>&gt;(std::rand())/static_cast&lt;<a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a>&gt;(RAND_MAX)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                      : 0.)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                     );</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;          dir(0) = (dir(0)-.5)*2.;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.mesh_dimension() &gt; 1)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            dir(1) = (dir(1)-.5)*2.;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.mesh_dimension() == 3)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            dir(2) = (dir(2)-.5)*2.;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;          dir = dir.unit();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;          Node *node = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.node_ptr(n);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;          <span class="keywordflow">if</span> (!node)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;          (*node)(0) += dir(0)*factor*hmin[n];</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.mesh_dimension() &gt; 1)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            (*node)(1) += dir(1)*factor*hmin[n];</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.mesh_dimension() == 3)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            (*node)(2) += dir(2)*factor*hmin[n];</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// All done</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="namespacelibMesh.html#aefa921f501605f00f5881b914fca3eeb">STOP_LOG</a>(<span class="stringliteral">&quot;distort()&quot;</span>, <span class="stringliteral">&quot;MeshTools::Modification&quot;</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="ttc" id="namespacelibMesh_html_ac03a5d846eeb24a13168f6b5358f86e3"><div class="ttname"><a href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libMesh::libmesh_assert</a></div><div class="ttdeci">libmesh_assert(remote_elem)</div></div>
<div class="ttc" id="namespacelibMesh_html_aefa921f501605f00f5881b914fca3eeb"><div class="ttname"><a href="namespacelibMesh.html#aefa921f501605f00f5881b914fca3eeb">libMesh::STOP_LOG</a></div><div class="ttdeci">STOP_LOG(&quot;std::sqrt()&quot;,&quot;ExactErrorEstimator&quot;)</div></div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l00824">mesh_communication.C:824</a></div></div>
<div class="ttc" id="variant__filter__iterator_8h_html_a785f0bd261d7bd1918b031c5133da2b9"><div class="ttname"><a href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a></div><div class="ttdeci">IterBase * end</div><div class="ttdef"><b>Definition:</b> <a href="variant__filter__iterator_8h_source.html#l00324">variant_filter_iterator.h:324</a></div></div>
<div class="ttc" id="namespacestd_html_a6987c84b7beab8b2ebdee7e2549d698f"><div class="ttname"><a href="namespacestd.html#a6987c84b7beab8b2ebdee7e2549d698f">std::max</a></div><div class="ttdeci">long double max(long double a, double b)</div><div class="ttdef"><b>Definition:</b> <a href="libmesh__augment__std__namespace_8h_source.html#l00027">libmesh_augment_std_namespace.h:27</a></div></div>
<div class="ttc" id="namespacelibMesh_html_aef28359fb4851abec08fc99cfbac118d"><div class="ttname"><a href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">libMesh::Real</a></div><div class="ttdeci">DIE A HORRIBLE DEATH HERE typedef LIBMESH_DEFAULT_SCALAR_TYPE Real</div><div class="ttdef"><b>Definition:</b> <a href="libmesh__common_8h_source.html#l00119">libmesh_common.h:119</a></div></div>
<div class="ttc" id="namespacestd_html_a4444b32c7044d9b34125eaebd070a0e3"><div class="ttname"><a href="namespacestd.html#a4444b32c7044d9b34125eaebd070a0e3">std::min</a></div><div class="ttdeci">long double min(long double a, double b)</div><div class="ttdef"><b>Definition:</b> <a href="libmesh__augment__std__namespace_8h_source.html#l00029">libmesh_augment_std_namespace.h:29</a></div></div>
<div class="ttc" id="namespacelibMesh_1_1MeshTools_html_a0fd39d630f54c93571ee6449e8b15550"><div class="ttname"><a href="namespacelibMesh_1_1MeshTools.html#a0fd39d630f54c93571ee6449e8b15550">libMesh::MeshTools::find_boundary_nodes</a></div><div class="ttdeci">void find_boundary_nodes(const MeshBase &amp;mesh, std::vector&lt; bool &gt; &amp;on_boundary)</div><div class="ttdef"><b>Definition:</b> <a href="mesh__tools_8C_source.html#l00389">mesh_tools.C:389</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a7548a5faa85e5027223ef5c57d792445"><div class="ttname"><a href="namespacelibMesh.html#a7548a5faa85e5027223ef5c57d792445">libMesh::START_LOG</a></div><div class="ttdeci">START_LOG(&quot;std::sqrt()&quot;,&quot;ExactErrorEstimator&quot;)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a31ce3f7f69838b3326f9bcabae3f2cd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::MeshTools::Modification::flatten </td>
          <td>(</td>
          <td class="paramtype">MeshBase &amp;&#160;</td>
          <td class="paramname"><em>mesh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes all the refinement tree structure of <a class="el" href="classlibMesh_1_1Mesh.html">Mesh</a>, leaving only the highest-level (most-refined) elements. This is useful when you want to write out a uniformly-refined grid to be treated later as an initial mesh. Note that many functions in LibMesh assume a conforming (with no hanging nodes) grid exists at some level, so you probably only want to do this on meshes which have been uniformly refined. </p>

<p>Definition at line <a class="el" href="mesh__modification_8C_source.html#l01362">1362</a> of file <a class="el" href="mesh__modification_8C_source.html">mesh_modification.C</a>.</p>

<p>References <a class="el" href="classlibMesh_1_1MeshBase.html#aefa4ded9eaf654a45ab593a0963ecbf3">libMesh::MeshBase::active_elements_begin()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#ae3f09f1b7556aef88919249861728e23">libMesh::MeshBase::active_elements_end()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a5ab834283fa6bc335ad623d2b737ec5e">libMesh::MeshBase::add_elem()</a>, <a class="el" href="boundary__info_8C_source.html#l00697">libMesh::BoundaryInfo::add_side()</a>, <a class="el" href="xdr__io_8C_source.html#l00051">bc_id</a>, <a class="el" href="boundary__info_8C_source.html#l00811">libMesh::BoundaryInfo::boundary_ids()</a>, <a class="el" href="elem_8C_source.html#l00209">libMesh::Elem::build()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a5c7824047ed759b5a4891a6936b546cc">libMesh::MeshBase::delete_elem()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#ac266e1f5eb6ac9566ccbd7e6add6c239">libMesh::MeshBase::elements_begin()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#ae94f1bce0dc50c489c6bae9ba64d06e8">libMesh::MeshBase::elements_end()</a>, <a class="el" href="variant__filter__iterator_8h_source.html#l00324">end</a>, <a class="el" href="mesh__base_8h_source.html#l00113">libMesh::MeshBase::get_boundary_info()</a>, <a class="el" href="elem_8h_source.html#l01375">libMesh::Elem::get_node()</a>, <a class="el" href="dof__object_8h_source.html#l00618">libMesh::DofObject::id()</a>, <a class="el" href="boundary__info_8h_source.html#l00496">libMesh::BoundaryInfo::invalid_id</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#ae5b70f8be225d006fb25ef1e6b82bc3a">libMesh::MeshBase::n_active_elem()</a>, <a class="el" href="boundary__info_8C_source.html#l01449">libMesh::BoundaryInfo::n_boundary_conds()</a>, <a class="el" href="classlibMesh_1_1Elem.html#a3a1e00b1906b0f6cf0cc1760c9a7da1f">libMesh::Elem::n_nodes()</a>, <a class="el" href="classlibMesh_1_1Elem.html#ae376bfa6ac14723330e07a97992b56c9">libMesh::Elem::n_sides()</a>, <a class="el" href="elem_8h_source.html#l01424">libMesh::Elem::neighbor()</a>, <a class="el" href="mesh__base_8C_source.html#l00120">libMesh::MeshBase::prepare_for_use()</a>, <a class="el" href="dof__object_8h_source.html#l00680">libMesh::DofObject::processor_id()</a>, <a class="el" href="remote__elem_8C_source.html#l00057">libMesh::remote_elem</a>, <a class="el" href="dof__object_8h_source.html#l00627">libMesh::DofObject::set_id()</a>, <a class="el" href="elem_8h_source.html#l01434">libMesh::Elem::set_neighbor()</a>, <a class="el" href="elem_8h_source.html#l01398">libMesh::Elem::set_node()</a>, <a class="el" href="elem_8h_source.html#l01408">libMesh::Elem::subdomain_id()</a>, and <a class="el" href="classlibMesh_1_1Elem.html#ad06f8ac22978144723179eed42d10bae">libMesh::Elem::type()</a>.</p>
<div class="fragment"><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;{</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="comment">// Algorithm:</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="comment">// .) For each active element in the mesh: construct a</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="comment">//    copy which is the same in every way *except* it is</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="comment">//    a level 0 element.  Store the pointers to these in</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="comment">//    a separate vector. Save any boundary information as well.</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="comment">//    Delete the active element from the mesh.</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="comment">// .) Loop over all (remaining) elements in the mesh, delete them.</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// .) Add the level-0 copies back to the mesh</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="comment">// Temporary storage for new element pointers</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  std::vector&lt;Elem*&gt; new_elements;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="comment">// BoundaryInfo Storage for element ids, sides, and BC ids</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  std::vector&lt;Elem*&gt;              saved_boundary_elements;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  std::vector&lt;boundary_id_type&gt;   saved_bc_ids;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  std::vector&lt;unsigned short int&gt; saved_bc_sides;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="comment">// Reserve a reasonable amt. of space for each</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  new_elements.reserve(<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_active_elem());</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  saved_boundary_elements.reserve(<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().n_boundary_conds());</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  saved_bc_ids.reserve(<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().n_boundary_conds());</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  saved_bc_sides.reserve(<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().n_boundary_conds());</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  {</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    MeshBase::element_iterator       it  = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.active_elements_begin();</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keyword">const</span> MeshBase::element_iterator <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a> = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.active_elements_end();</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keywordflow">for</span> (; it != <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a>; ++it)</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        Elem* elem = *it;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        <span class="comment">// Make a new element of the same type</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        Elem* copy = Elem::build(elem-&gt;type()).release();</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <span class="comment">// Set node pointers (they still point to nodes in the original mesh)</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n=0; n&lt;elem-&gt;n_nodes(); n++)</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;          copy-&gt;set_node(n) = elem-&gt;get_node(n);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <span class="comment">// Copy over ids</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        copy-&gt;processor_id() = elem-&gt;processor_id();</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        copy-&gt;subdomain_id() = elem-&gt;subdomain_id();</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        <span class="comment">// Retain the original element&#39;s ID as well, otherwise ParallelMesh will</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        <span class="comment">// try to create one for you...</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        copy-&gt;set_id( elem-&gt;id() );</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="comment">// This element could have boundary info or ParallelMesh</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="comment">// remote_elem links as well.  We need to save the (elem,</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="comment">// side, bc_id) triples and those links</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> s=0; s&lt;elem-&gt;n_sides(); s++)</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;          {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;            <span class="keywordflow">if</span> (elem-&gt;neighbor(s) == <a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>)</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;              copy-&gt;set_neighbor(s, const_cast&lt;RemoteElem*&gt;(<a class="code" href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">remote_elem</a>));</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            <span class="keyword">const</span> std::vector&lt;boundary_id_type&gt;&amp; bc_ids =</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;              <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().boundary_ids(elem,s);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            <span class="keywordflow">for</span> (std::vector&lt;boundary_id_type&gt;::const_iterator id_it=bc_ids.begin(); id_it!=bc_ids.end(); ++id_it)</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;              {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#a3f4d8a52b5ef6ff6156ca209e12b5564">boundary_id_type</a> <a class="code" href="xdr__io_8C.html#a7b966a996f9a3159d0be57a9c2e55df3">bc_id</a> = *id_it;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                <span class="keywordflow">if</span> (bc_id != BoundaryInfo::invalid_id)</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                  {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                    saved_boundary_elements.push_back(copy);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                    saved_bc_ids.push_back(bc_id);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                    saved_bc_sides.push_back(s);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                  }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;              }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;          }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <span class="comment">// We&#39;re done with this element</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.delete_elem(elem);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <span class="comment">// But save the copy</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        new_elements.push_back(copy);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      }</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="comment">// Make sure we saved the same number of boundary conditions</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="comment">// in each vector.</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    libmesh_assert_equal_to (saved_boundary_elements.size(), saved_bc_ids.size());</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    libmesh_assert_equal_to (saved_bc_ids.size(), saved_bc_sides.size());</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  }</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="comment">// Loop again, delete any remaining elements</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    MeshBase::element_iterator       it  = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.elements_begin();</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keyword">const</span> MeshBase::element_iterator end = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.elements_end();</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">for</span> (; it != <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a>; ++it)</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.delete_elem( *it );</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="comment">// Add the copied (now level-0) elements back to the mesh</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  {</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordflow">for</span> (std::vector&lt;Elem*&gt;::iterator it = new_elements.begin();</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;         it != new_elements.end();</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;         ++it)</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> orig_id = (*it)-&gt;id();</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="comment">// ugly mid-statement endif to avoid unused variable warnings</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        Elem* added_elem =</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;          <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.add_elem(*it);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> added_id = added_elem-&gt;id();</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <span class="comment">// If the Elem, as it was re-added to the mesh, now has a</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="comment">// different ID (this is unlikely, so it&#39;s just an assert)</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="comment">// the boundary information will no longer be correct.</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        libmesh_assert_equal_to (orig_id, added_id);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      }</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  }</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// Finally, also add back the saved boundary information</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> e=0; e&lt;saved_boundary_elements.size(); ++e)</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.get_boundary_info().add_side(saved_boundary_elements[e],</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                                      saved_bc_sides[e],</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                                      saved_bc_ids[e]);</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="comment">// Trim unused and renumber nodes and elements</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.prepare_for_use(<span class="comment">/*skip_renumber =*/</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;}</div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l00824">mesh_communication.C:824</a></div></div>
<div class="ttc" id="variant__filter__iterator_8h_html_a785f0bd261d7bd1918b031c5133da2b9"><div class="ttname"><a href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a></div><div class="ttdeci">IterBase * end</div><div class="ttdef"><b>Definition:</b> <a href="variant__filter__iterator_8h_source.html#l00324">variant_filter_iterator.h:324</a></div></div>
<div class="ttc" id="xdr__io_8C_html_a7b966a996f9a3159d0be57a9c2e55df3"><div class="ttname"><a href="xdr__io_8C.html#a7b966a996f9a3159d0be57a9c2e55df3">bc_id</a></div><div class="ttdeci">boundary_id_type bc_id</div><div class="ttdef"><b>Definition:</b> <a href="xdr__io_8C_source.html#l00051">xdr_io.C:51</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a3f4d8a52b5ef6ff6156ca209e12b5564"><div class="ttname"><a href="namespacelibMesh.html#a3f4d8a52b5ef6ff6156ca209e12b5564">libMesh::boundary_id_type</a></div><div class="ttdeci">int8_t boundary_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00051">id_types.h:51</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ab4541d74809228310a715b11c40587fc"><div class="ttname"><a href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">libMesh::dof_id_type</a></div><div class="ttdeci">uint8_t dof_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00064">id_types.h:64</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a903992f631b52b5ba05ad96a51e7b383"><div class="ttname"><a href="namespacelibMesh.html#a903992f631b52b5ba05ad96a51e7b383">libMesh::remote_elem</a></div><div class="ttdeci">const RemoteElem * remote_elem</div><div class="ttdef"><b>Definition:</b> <a href="remote__elem_8C_source.html#l00057">remote_elem.C:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9bb33f8faabadb6dbad5d5cf6c0efd9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::MeshTools::Modification::redistribute </td>
          <td>(</td>
          <td class="paramtype">MeshBase &amp;&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FunctionBase&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>mapfunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deterministically perturb the nodal locations. This function will move each node from it's current x/y/z coordinates to a new x/y/z coordinate given by the first LIBMESH_DIM components of the specified function <code>mapfunc</code> </p>
<p>Nodes on the boundary are also moved.</p>
<p>Currently, non-vertex nodes are moved in the same way as vertex nodes, according to (newx,newy,newz) = mapfunc(x,y,z). This behavior is often suboptimal for higher order geometries and may be subject to change in future <a class="el" href="namespacelibMesh.html">libMesh</a> versions. </p>

<p>Definition at line <a class="el" href="mesh__modification_8C_source.html#l00138">138</a> of file <a class="el" href="mesh__modification_8C_source.html">mesh_modification.C</a>.</p>

<p>References <a class="el" href="classlibMesh_1_1FunctionBase.html#a0fa9e12a43d512bd2e66bc85338130eb">libMesh::FunctionBase&lt; Output &gt;::clone()</a>, <a class="el" href="variant__filter__iterator_8h_source.html#l00324">end</a>, <a class="el" href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libMesh::libmesh_assert()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a190e556d3be87f5ccd8d4fc98d1779d3">libMesh::MeshBase::n_elem()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a5b76b109bc6bd087c981774897aa6167">libMesh::MeshBase::n_nodes()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a3ab1d28a6ea1e8028ce0c06e11cfb68d">libMesh::MeshBase::nodes_begin()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a47575077b6ad40d4f05292634f7615f8">libMesh::MeshBase::nodes_end()</a>, <a class="el" href="namespacelibMesh.html#a7548a5faa85e5027223ef5c57d792445">libMesh::START_LOG()</a>, and <a class="el" href="namespacelibMesh.html#aefa921f501605f00f5881b914fca3eeb">libMesh::STOP_LOG()</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libmesh_assert</a> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_nodes());</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libmesh_assert</a> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_elem());</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="namespacelibMesh.html#a7548a5faa85e5027223ef5c57d792445">START_LOG</a>(<span class="stringliteral">&quot;redistribute()&quot;</span>, <span class="stringliteral">&quot;MeshTools::Modification&quot;</span>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  DenseVector&lt;Real&gt; output_vec(LIBMESH_DIM);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">// FIXME - we should thread this later.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  AutoPtr&lt;FunctionBase&lt;Real&gt; &gt; myfunc = mapfunc.clone();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  MeshBase::node_iterator       it  = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.nodes_begin();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keyword">const</span> MeshBase::node_iterator <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a> = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.nodes_end();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">for</span> (; it != <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a>; ++it)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      Node *node = *it;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      (*myfunc)(*node, output_vec);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      (*node)(0) = output_vec(0);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#if LIBMESH_DIM &gt; 1</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      (*node)(1) = output_vec(1);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#if LIBMESH_DIM &gt; 2</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      (*node)(2) = output_vec(2);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// All done</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="namespacelibMesh.html#aefa921f501605f00f5881b914fca3eeb">STOP_LOG</a>(<span class="stringliteral">&quot;redistribute()&quot;</span>, <span class="stringliteral">&quot;MeshTools::Modification&quot;</span>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="ttc" id="namespacelibMesh_html_ac03a5d846eeb24a13168f6b5358f86e3"><div class="ttname"><a href="namespacelibMesh.html#ac03a5d846eeb24a13168f6b5358f86e3">libMesh::libmesh_assert</a></div><div class="ttdeci">libmesh_assert(remote_elem)</div></div>
<div class="ttc" id="namespacelibMesh_html_aefa921f501605f00f5881b914fca3eeb"><div class="ttname"><a href="namespacelibMesh.html#aefa921f501605f00f5881b914fca3eeb">libMesh::STOP_LOG</a></div><div class="ttdeci">STOP_LOG(&quot;std::sqrt()&quot;,&quot;ExactErrorEstimator&quot;)</div></div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l00824">mesh_communication.C:824</a></div></div>
<div class="ttc" id="variant__filter__iterator_8h_html_a785f0bd261d7bd1918b031c5133da2b9"><div class="ttname"><a href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a></div><div class="ttdeci">IterBase * end</div><div class="ttdef"><b>Definition:</b> <a href="variant__filter__iterator_8h_source.html#l00324">variant_filter_iterator.h:324</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a7548a5faa85e5027223ef5c57d792445"><div class="ttname"><a href="namespacelibMesh.html#a7548a5faa85e5027223ef5c57d792445">libMesh::START_LOG</a></div><div class="ttdeci">START_LOG(&quot;std::sqrt()&quot;,&quot;ExactErrorEstimator&quot;)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad1b9487f3155857fbc4c4201a748bc09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::MeshTools::Modification::rotate </td>
          <td>(</td>
          <td class="paramtype">MeshBase &amp;&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>phi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>theta</em> = <code>0.</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>psi</em> = <code>0.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rotates the mesh in the xy plane. The rotation is counter-clock-wise (mathematical definition). The angle is in degrees (360 make a full circle) Rotates the mesh in 3D space. Here the standard Euler angles are adopted (<a href="http://mathworld.wolfram.com/EulerAngles.html">http://mathworld.wolfram.com/EulerAngles.html</a>) The angles are in degrees (360 make a full circle) </p>

<p>Definition at line <a class="el" href="mesh__modification_8C_source.html#l00212">212</a> of file <a class="el" href="mesh__modification_8C_source.html">mesh_modification.C</a>.</p>

<p>References <a class="el" href="classlibMesh_1_1MeshBase.html#a3ab1d28a6ea1e8028ce0c06e11cfb68d">libMesh::MeshBase::nodes_begin()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a47575077b6ad40d4f05292634f7615f8">libMesh::MeshBase::nodes_end()</a>, <a class="el" href="libmesh_8h_source.html#l00158">libMesh::pi</a>, <a class="el" href="libmesh__common_8h_source.html#l00119">libMesh::Real</a>, and <a class="el" href="petsc__diff__solver_8C_source.html#l00143">libMesh::x</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;{</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="preprocessor">#if LIBMESH_DIM == 3</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a>  p = -phi/180.*<a class="code" href="namespacelibMesh.html#a668b057121e7cf9d0c35207b7ab6bf38">libMesh::pi</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a>  t = -theta/180.*<a class="code" href="namespacelibMesh.html#a668b057121e7cf9d0c35207b7ab6bf38">libMesh::pi</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a>  s = -psi/180.*<a class="code" href="namespacelibMesh.html#a668b057121e7cf9d0c35207b7ab6bf38">libMesh::pi</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> sp = std::sin(p), cp = std::cos(p);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> st = std::sin(t), ct = std::cos(t);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> ss = std::sin(s), cs = std::cos(s);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// We follow the convention described at http://mathworld.wolfram.com/EulerAngles.html</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// (equations 6-14 give the entries of the composite transformation matrix).</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">// The rotations are performed sequentially about the z, x, and z axes, in that order.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// A positive angle yields a counter-clockwise rotation about the axis in question.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keyword">const</span> MeshBase::node_iterator nd_end = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.nodes_end();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">for</span> (MeshBase::node_iterator nd = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.nodes_begin();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;       nd != nd_end; ++nd)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keyword">const</span> Point pt = **nd;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a>  <a class="code" href="petscdmlibmesh_8C.html#a773c3fe300b0c80a5b6224a605cf265e">x</a>  = pt(0);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a>  y  = pt(1);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a>  z  = pt(2);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      **nd = Point(( cp*cs-sp*ct*ss)*x + ( sp*cs+cp*ct*ss)*y + (st*ss)*z,</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                   (-cp*ss-sp*ct*cs)*x + (-sp*ss+cp*ct*cs)*y + (st*cs)*z,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                   ( sp*st)*x          + (-cp*st)*y          + (ct)*z   );</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  libmesh_error_msg(<span class="stringliteral">&quot;MeshTools::Modification::rotate() requires libMesh to be compiled with LIBMESH_DIM==3&quot;</span>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l00824">mesh_communication.C:824</a></div></div>
<div class="ttc" id="namespacelibMesh_html_aef28359fb4851abec08fc99cfbac118d"><div class="ttname"><a href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">libMesh::Real</a></div><div class="ttdeci">DIE A HORRIBLE DEATH HERE typedef LIBMESH_DEFAULT_SCALAR_TYPE Real</div><div class="ttdef"><b>Definition:</b> <a href="libmesh__common_8h_source.html#l00119">libmesh_common.h:119</a></div></div>
<div class="ttc" id="petscdmlibmesh_8C_html_a773c3fe300b0c80a5b6224a605cf265e"><div class="ttname"><a href="petscdmlibmesh_8C.html#a773c3fe300b0c80a5b6224a605cf265e">x</a></div><div class="ttdeci">static PetscErrorCode Vec x</div><div class="ttdef"><b>Definition:</b> <a href="petscdmlibmesh_8C_source.html#l00808">petscdmlibmesh.C:808</a></div></div>
<div class="ttc" id="namespacelibMesh_html_a668b057121e7cf9d0c35207b7ab6bf38"><div class="ttname"><a href="namespacelibMesh.html#a668b057121e7cf9d0c35207b7ab6bf38">libMesh::pi</a></div><div class="ttdeci">const Real pi</div><div class="ttdef"><b>Definition:</b> <a href="libmesh_8h_source.html#l00158">libmesh.h:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a48c03ebd8ce97c6c8aef8e2a05a94a16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::MeshTools::Modification::scale </td>
          <td>(</td>
          <td class="paramtype">MeshBase &amp;&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>xs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>ys</em> = <code>0.</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>zs</em> = <code>0.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Scales the mesh. The grid points are scaled in the <code>x</code> direction by <code>xs</code>, in the <code>y</code> direction by <code>ys</code>, etc... If only <code>xs</code> is specified then the scaling is assumed uniform in all directions. </p>

<p>Definition at line <a class="el" href="mesh__modification_8C_source.html#l00248">248</a> of file <a class="el" href="mesh__modification_8C_source.html">mesh_modification.C</a>.</p>

<p>References <a class="el" href="classlibMesh_1_1MeshBase.html#a3ab1d28a6ea1e8028ce0c06e11cfb68d">libMesh::MeshBase::nodes_begin()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a47575077b6ad40d4f05292634f7615f8">libMesh::MeshBase::nodes_end()</a>, <a class="el" href="libmesh__common_8h_source.html#l00119">libMesh::Real</a>, and <a class="el" href="mesh__base_8h_source.html#l00171">libMesh::MeshBase::spatial_dimension()</a>.</p>

<p>Referenced by <a class="el" href="dense__vector_8h_source.html#l00375">libMesh::DenseVector&lt; T &gt;::operator*=()</a>, and <a class="el" href="dense__matrix_8h_source.html#l00789">libMesh::DenseMatrix&lt; T &gt;::operator*=()</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;{</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> x_scale = xs;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> y_scale       = ys;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> z_scale       = zs;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">if</span> (ys == 0.)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      libmesh_assert_equal_to (zs, 0.);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      y_scale = z_scale = x_scale;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// Scale the x coordinate in all dimensions</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keyword">const</span> MeshBase::node_iterator nd_end = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.nodes_end();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">for</span> (MeshBase::node_iterator nd = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.nodes_begin();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;       nd != nd_end; ++nd)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    (**nd)(0) *= x_scale;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// Only scale the y coordinate in 2 and 3D</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.spatial_dimension() &lt; 2)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordflow">for</span> (MeshBase::node_iterator nd = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.nodes_begin();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;       nd != nd_end; ++nd)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    (**nd)(1) *= y_scale;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// Only scale the z coordinate in 3D</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.spatial_dimension() &lt; 3)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">for</span> (MeshBase::node_iterator nd = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.nodes_begin();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;       nd != nd_end; ++nd)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    (**nd)(2) *= z_scale;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l00824">mesh_communication.C:824</a></div></div>
<div class="ttc" id="namespacelibMesh_html_aef28359fb4851abec08fc99cfbac118d"><div class="ttname"><a href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">libMesh::Real</a></div><div class="ttdeci">DIE A HORRIBLE DEATH HERE typedef LIBMESH_DEFAULT_SCALAR_TYPE Real</div><div class="ttdef"><b>Definition:</b> <a href="libmesh__common_8h_source.html#l00119">libmesh_common.h:119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2e817d4980341bde2cc3fba486d0d8e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::MeshTools::Modification::smooth </td>
          <td>(</td>
          <td class="paramtype">MeshBase &amp;&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>n_iterations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Real&#160;</td>
          <td class="paramname"><em>power</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Smooth the mesh with a simple Laplace smoothing algorithm. The mesh is smoothed <code>n_iterations</code> times. If the parameter <code>power</code> is 0, each node is moved to the average postition of the neighboring connected nodes. If <code>power</code> &gt; 0, the node positions are weighted by their distance. The positions of higher order nodes, and nodes living in refined elements, are calculated from the vertex positions of their parent nodes. Only works in 2D.</p>
<dl class="section author"><dt>Author</dt><dd>Martin Luthi (<a href="#" onclick="location.href='mai'+'lto:'+'lut'+'hi'+'@gi'+'.a'+'las'+'ka'+'.ed'+'u'; return false;">luthi<span style="display: none;">.nosp@m.</span>@gi.<span style="display: none;">.nosp@m.</span>alask<span style="display: none;">.nosp@m.</span>a.ed<span style="display: none;">.nosp@m.</span>u</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2005 </dd></dl>
<p>This implementation assumes every element "side" has only 2 nodes.</p>

<p>Definition at line <a class="el" href="mesh__modification_8C_source.html#l01180">1180</a> of file <a class="el" href="mesh__modification_8C_source.html">mesh_modification.C</a>.</p>

<p>References <a class="el" href="type__vector_8h_source.html#l00516">libMesh::TypeVector&lt; T &gt;::add()</a>, <a class="el" href="type__vector_8h_source.html#l00540">libMesh::TypeVector&lt; T &gt;::add_scaled()</a>, <a class="el" href="classlibMesh_1_1Elem.html#adf633f222ddcbe450345c98c68050fda">libMesh::Elem::build_side()</a>, <a class="el" href="elem_8h_source.html#l01783">libMesh::Elem::child()</a>, <a class="el" href="classlibMesh_1_1Elem.html#a20e8a3350fb24fd249209e0089b2ca33">libMesh::Elem::embedding_matrix()</a>, <a class="el" href="variant__filter__iterator_8h_source.html#l00324">end</a>, <a class="el" href="mesh__tools_8C_source.html#l00389">libMesh::MeshTools::find_boundary_nodes()</a>, <a class="el" href="elem_8h_source.html#l01375">libMesh::Elem::get_node()</a>, <a class="el" href="dof__object_8h_source.html#l00618">libMesh::DofObject::id()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a32031f5d29428cf17dad4cabaf60d298">libMesh::MeshBase::level_elements_begin()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#ae94f3f5a30c83cdd0187ba02a5b8b17e">libMesh::MeshBase::level_elements_end()</a>, <a class="el" href="mesh__base_8h_source.html#l00158">libMesh::MeshBase::mesh_dimension()</a>, <a class="el" href="classlibMesh_1_1Elem.html#ac9df9e0213d3ea1d2d8279892f6f1094">libMesh::Elem::n_children()</a>, <a class="el" href="mesh__tools_8C_source.html#l00626">libMesh::MeshTools::n_levels()</a>, <a class="el" href="elem_8h_source.html#l00423">libMesh::Elem::n_neighbors()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#a5b76b109bc6bd087c981774897aa6167">libMesh::MeshBase::n_nodes()</a>, <a class="el" href="classlibMesh_1_1Elem.html#a3a1e00b1906b0f6cf0cc1760c9a7da1f">libMesh::Elem::n_nodes()</a>, <a class="el" href="elem_8C_source.html#l01958">libMesh::Elem::n_second_order_adjacent_vertices()</a>, <a class="el" href="classlibMesh_1_1Elem.html#a27233687bfcc3f1988777fb8e2e514d1">libMesh::Elem::n_vertices()</a>, <a class="el" href="elem_8h_source.html#l01424">libMesh::Elem::neighbor()</a>, <a class="el" href="classlibMesh_1_1MeshBase.html#aba28f0e44e2762b79156563a96920a9c">libMesh::MeshBase::node()</a>, <a class="el" href="elem_8h_source.html#l01654">libMesh::Elem::parent()</a>, <a class="el" href="elem_8h_source.html#l01329">libMesh::Elem::point()</a>, <a class="el" href="libmesh__augment__std__namespace_8h_source.html#l00066">std::pow()</a>, <a class="el" href="libmesh__common_8h_source.html#l00119">libMesh::Real</a>, <a class="el" href="elem_8C_source.html#l01966">libMesh::Elem::second_order_adjacent_vertex()</a>, <a class="el" href="xdr__io_8C_source.html#l00050">side</a>, <a class="el" href="type__vector_8h_source.html#l00813">libMesh::TypeVector&lt; T &gt;::size()</a>, and <a class="el" href="mesh__tools_8C_source.html#l00338">libMesh::MeshTools::weight()</a>.</p>
<div class="fragment"><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;{</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  libmesh_assert_equal_to (<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.mesh_dimension(), 2);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">   * find the boundary nodes</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  std::vector&lt;bool&gt;  on_boundary;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <a class="code" href="namespacelibMesh_1_1MeshTools.html#a0fd39d630f54c93571ee6449e8b15550">MeshTools::find_boundary_nodes</a>(<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>, on_boundary);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iter=0; iter&lt;n_iterations; iter++)</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">       * loop over the mesh refinement level</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">n_levels</a> = <a class="code" href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">MeshTools::n_levels</a>(<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> refinement_level=0; refinement_level != <a class="code" href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">n_levels</a>;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;           refinement_level++)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        {</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;          <span class="comment">// initialize the storage (have to do it on every level to get empty vectors</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;          std::vector&lt;Point&gt; new_positions;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;          std::vector&lt;Real&gt;   <a class="code" href="namespacelibMesh_1_1MeshTools.html#a0701de7f01fd5eced3da4a332ff5ae51">weight</a>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;          new_positions.resize(<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_nodes());</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;          weight.resize(<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_nodes());</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;          {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">             * Loop over the elements to calculate new node positions</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            MeshBase::element_iterator       el  = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.level_elements_begin(refinement_level);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            <span class="keyword">const</span> MeshBase::element_iterator <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a> = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.level_elements_end(refinement_level);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            <span class="keywordflow">for</span> (; el != <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a>; ++el)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;              {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">                 * Constant handle for the element</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                <span class="keyword">const</span> Elem* elem = *el;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment">                 * We relax all nodes on level 0 first</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment">                 * If the element is refined (level &gt; 0), we interpolate the</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">                 * parents nodes with help of the embedding matrix</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                <span class="keywordflow">if</span> (refinement_level == 0)</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                  {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> s=0; s&lt;elem-&gt;n_neighbors(); s++)</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                      {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                        <span class="comment">/*</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment">                         * Only operate on sides which are on the</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">                         * boundary or for which the current element&#39;s</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment">                         * id is greater than its neighbor&#39;s.</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">                         * Sides get only built once.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment">                         */</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                        <span class="keywordflow">if</span> ((elem-&gt;neighbor(s) != NULL) &amp;&amp;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                            (elem-&gt;id() &gt; elem-&gt;neighbor(s)-&gt;id()) )</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                          {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                            AutoPtr&lt;Elem&gt; <a class="code" href="xdr__io_8C.html#a538c9c249908c84b07be8ce1400b82c9">side</a>(elem-&gt;build_side(s));</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                            Node* node0 = <a class="code" href="xdr__io_8C.html#a538c9c249908c84b07be8ce1400b82c9">side</a>-&gt;get_node(0);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                            Node* node1 = <a class="code" href="xdr__io_8C.html#a538c9c249908c84b07be8ce1400b82c9">side</a>-&gt;get_node(1);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                            <a class="code" href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">Real</a> node_weight = 1.;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                            <span class="comment">// calculate the weight of the nodes</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                            <span class="keywordflow">if</span> (power &gt; 0)</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                              {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                                Point diff = (*node0)-(*node1);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                                node_weight = <a class="code" href="namespacestd.html#a67fd575fd40c546de2928c8d9c6a5217">std::pow</a>( diff.size(), power );</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                              }</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                            <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> id0 = node0-&gt;id(), id1 = node1-&gt;id();</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                            new_positions[id0].add_scaled( *node1, node_weight );</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                            new_positions[id1].add_scaled( *node0, node_weight );</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                            weight[id0] += node_weight;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                            weight[id1] += node_weight;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                          }</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                      } <span class="comment">// element neighbor loop</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                  }</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="preprocessor">#ifdef LIBMESH_ENABLE_AMR</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                <span class="keywordflow">else</span>   <span class="comment">// refinement_level &gt; 0</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                  {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                    <span class="comment">/*</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">                     * Find the positions of the hanging nodes of refined elements.</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">                     * We do this by calculating their position based on the parent</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">                     * (one level less refined) element, and the embedding matrix</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">                     */</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                    <span class="keyword">const</span> Elem* parent = elem-&gt;parent();</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                    <span class="comment">/*</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">                     * find out which child I am</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="comment">                     */</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c=0; c &lt; parent-&gt;n_children(); c++)</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                      {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                        <span class="keywordflow">if</span> (parent-&gt;child(c) == elem)</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                          {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                            <span class="comment">/*</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">                             *loop over the childs (that is, the current elements) nodes</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="comment">                             */</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nc=0; nc &lt; elem-&gt;n_nodes(); nc++)</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                              {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                                <span class="comment">/*</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment">                                 * the new position of the node</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment">                                 */</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                                Point point;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n=0; n&lt;parent-&gt;n_nodes(); n++)</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                                  {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                                    <span class="comment">/*</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment">                                     * The value from the embedding matrix</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">                                     */</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">float</span> em_val = parent-&gt;embedding_matrix(c,nc,n);</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                                    <span class="keywordflow">if</span> (em_val != 0.)</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                                      point.add_scaled (parent-&gt;point(n), em_val);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                                  }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                                <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> <span class="keywordtype">id</span> = elem-&gt;get_node(nc)-&gt;id();</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                                new_positions[id] = point;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                                weight[id] = 1.;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                              }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                          } <span class="comment">// if parent-&gt;child == elem</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                      } <span class="comment">// for parent-&gt;n_children</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                  } <span class="comment">// if element refinement_level</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="preprocessor">#endif // #ifdef LIBMESH_ENABLE_AMR</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;              } <span class="comment">// element loop</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment">             * finally reposition the vertex nodes</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nid=0; nid&lt;<a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.n_nodes(); ++nid)</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;              <span class="keywordflow">if</span> (!on_boundary[nid] &amp;&amp; weight[nid] &gt; 0.)</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.node(nid) = new_positions[nid]/weight[nid];</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;          }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;          {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment">             * Now handle the additional second_order nodes by calculating</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">             * their position based on the vertex postitions</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">             * we do a second loop over the level elements</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            MeshBase::element_iterator       el  = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.level_elements_begin(refinement_level);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            <span class="keyword">const</span> MeshBase::element_iterator end = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.level_elements_end(refinement_level);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            <span class="keywordflow">for</span> (; el != <a class="code" href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a>; ++el)</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;              {</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">                 * Constant handle for the element</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                <span class="keyword">const</span> Elem* elem = *el;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> son_begin = elem-&gt;n_vertices();</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> son_end   = elem-&gt;n_nodes();</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n=son_begin; n&lt;son_end; n++)</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                  {</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_adjacent_vertices =</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                      elem-&gt;n_second_order_adjacent_vertices(n);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                    Point point;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> v=0; v&lt;n_adjacent_vertices; v++)</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                      point.add(elem-&gt;point( elem-&gt;second_order_adjacent_vertex(n,v) ));</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                    <span class="keyword">const</span> <a class="code" href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">dof_id_type</a> <span class="keywordtype">id</span> = elem-&gt;get_node(n)-&gt;id();</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                    <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.node(<span class="keywordtype">id</span>) = point/n_adjacent_vertices;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                  }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;              }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;          }</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        } <span class="comment">// refinement_level loop</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    } <span class="comment">// end iteration</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;}</div>
<div class="ttc" id="xdr__io_8C_html_a538c9c249908c84b07be8ce1400b82c9"><div class="ttname"><a href="xdr__io_8C.html#a538c9c249908c84b07be8ce1400b82c9">side</a></div><div class="ttdeci">unsigned short int side</div><div class="ttdef"><b>Definition:</b> <a href="xdr__io_8C_source.html#l00050">xdr_io.C:50</a></div></div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l00824">mesh_communication.C:824</a></div></div>
<div class="ttc" id="variant__filter__iterator_8h_html_a785f0bd261d7bd1918b031c5133da2b9"><div class="ttname"><a href="variant__filter__iterator_8h.html#a785f0bd261d7bd1918b031c5133da2b9">end</a></div><div class="ttdeci">IterBase * end</div><div class="ttdef"><b>Definition:</b> <a href="variant__filter__iterator_8h_source.html#l00324">variant_filter_iterator.h:324</a></div></div>
<div class="ttc" id="namespacelibMesh_1_1MeshTools_html_a0701de7f01fd5eced3da4a332ff5ae51"><div class="ttname"><a href="namespacelibMesh_1_1MeshTools.html#a0701de7f01fd5eced3da4a332ff5ae51">libMesh::MeshTools::weight</a></div><div class="ttdeci">dof_id_type weight(const MeshBase &amp;mesh, const processor_id_type pid)</div><div class="ttdef"><b>Definition:</b> <a href="mesh__tools_8C_source.html#l00338">mesh_tools.C:338</a></div></div>
<div class="ttc" id="namespacelibMesh_1_1MeshTools_html_ae15ece869d4ef3d283edb677942e8439"><div class="ttname"><a href="namespacelibMesh_1_1MeshTools.html#ae15ece869d4ef3d283edb677942e8439">libMesh::MeshTools::n_levels</a></div><div class="ttdeci">unsigned int n_levels(const MeshBase &amp;mesh)</div><div class="ttdef"><b>Definition:</b> <a href="mesh__tools_8C_source.html#l00626">mesh_tools.C:626</a></div></div>
<div class="ttc" id="namespacestd_html_a67fd575fd40c546de2928c8d9c6a5217"><div class="ttname"><a href="namespacestd.html#a67fd575fd40c546de2928c8d9c6a5217">std::pow</a></div><div class="ttdeci">double pow(double a, int b)</div><div class="ttdef"><b>Definition:</b> <a href="libmesh__augment__std__namespace_8h_source.html#l00066">libmesh_augment_std_namespace.h:66</a></div></div>
<div class="ttc" id="namespacelibMesh_html_aef28359fb4851abec08fc99cfbac118d"><div class="ttname"><a href="namespacelibMesh.html#aef28359fb4851abec08fc99cfbac118d">libMesh::Real</a></div><div class="ttdeci">DIE A HORRIBLE DEATH HERE typedef LIBMESH_DEFAULT_SCALAR_TYPE Real</div><div class="ttdef"><b>Definition:</b> <a href="libmesh__common_8h_source.html#l00119">libmesh_common.h:119</a></div></div>
<div class="ttc" id="namespacelibMesh_1_1MeshTools_html_a0fd39d630f54c93571ee6449e8b15550"><div class="ttname"><a href="namespacelibMesh_1_1MeshTools.html#a0fd39d630f54c93571ee6449e8b15550">libMesh::MeshTools::find_boundary_nodes</a></div><div class="ttdeci">void find_boundary_nodes(const MeshBase &amp;mesh, std::vector&lt; bool &gt; &amp;on_boundary)</div><div class="ttdef"><b>Definition:</b> <a href="mesh__tools_8C_source.html#l00389">mesh_tools.C:389</a></div></div>
<div class="ttc" id="namespacelibMesh_html_ab4541d74809228310a715b11c40587fc"><div class="ttname"><a href="namespacelibMesh.html#ab4541d74809228310a715b11c40587fc">libMesh::dof_id_type</a></div><div class="ttdeci">uint8_t dof_id_type</div><div class="ttdef"><b>Definition:</b> <a href="id__types_8h_source.html#l00064">id_types.h:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="add16d717dcc51dfd7d2bf671fe8e811b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libMesh::MeshTools::Modification::translate </td>
          <td>(</td>
          <td class="paramtype">MeshBase &amp;&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>xt</em> = <code>0.</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>yt</em> = <code>0.</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>zt</em> = <code>0.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Translates the mesh. The grid points are translated in the <code>x</code> direction by <code>xt</code>, in the <code>y</code> direction by <code>yt</code>, etc... </p>

<p>Definition at line <a class="el" href="mesh__modification_8C_source.html#l00175">175</a> of file <a class="el" href="mesh__modification_8C_source.html">mesh_modification.C</a>.</p>

<p>References <a class="el" href="classlibMesh_1_1MeshBase.html#a3ab1d28a6ea1e8028ce0c06e11cfb68d">libMesh::MeshBase::nodes_begin()</a>, and <a class="el" href="classlibMesh_1_1MeshBase.html#a47575077b6ad40d4f05292634f7615f8">libMesh::MeshBase::nodes_end()</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keyword">const</span> Point p(xt, yt, zt);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keyword">const</span> MeshBase::node_iterator nd_end = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.nodes_end();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">for</span> (MeshBase::node_iterator nd = <a class="code" href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a>.nodes_begin();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;       nd != nd_end; ++nd)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    **nd += p;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
<div class="ttc" id="mesh__communication_8C_html_afaa03b874c297f4693d9cdef7f50f3c6"><div class="ttname"><a href="mesh__communication_8C.html#afaa03b874c297f4693d9cdef7f50f3c6">mesh</a></div><div class="ttdeci">MeshBase &amp; mesh</div><div class="ttdef"><b>Definition:</b> <a href="mesh__communication_8C_source.html#l00824">mesh_communication.C:824</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
generated by <a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a>
</small></address>
<!-- dynamic header stuff -->
<script type="text/javascript">
$(document).ready(function(){
  $(window).on('scroll',function() {
    var scrolltop = $(this).scrollTop();
    if(scrolltop >= 215) {
      $('#fixedbar').fadeIn(250);
    }
    else if(scrolltop <= 210) {
      $('#fixedbar').fadeOut(250);
    }
  });
});
</script>
<!-- Google Analytics stuff -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24978333-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
